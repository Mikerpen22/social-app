{"ast":null,"code":"import _toConsumableArray from\"/Users/mikey/social-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/mikey/social-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mikey/social-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mikey/social-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import\"./home.css\";import Feed from'../../components/feed/Feed';import Rightbar from'../../components/rightbar/Rightbar';import Sidebar from'../../components/sidebar/Sidebar';import Topbar from'../../components/topbar/Topbar';import{useEffect}from'react';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(props){var tempArrForInitialState=new Array(20);var _useState=useState(tempArrForInitialState),_useState2=_slicedToArray(_useState,2),friendsArr=_useState2[0],setFriends=_useState2[1];// Fetch users from dummy server\nuseEffect(function(){var getFriends=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var serverFriends,updatedFriends,friendsIdList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchFriends();case 2:serverFriends=_context.sent;if(localStorage.getItem(\"friends\")){console.log(localStorage);updatedFriends=localStorage.getItem(\"friends\").split(',');updatedFriends=updatedFriends.map(function(n){return parseInt(n);});console.log(updatedFriends);serverFriends=serverFriends.filter(function(f){return updatedFriends.includes(f.id);});}localStorage.setItem(\"allFriends\",serverFriends);setFriends(serverFriends);friendsIdList=serverFriends.map(function(f){return f.id;});console.log(friendsIdList);localStorage.setItem(\"friends\",friendsIdList);console.log(localStorage);case 10:case\"end\":return _context.stop();}}},_callee);}));return function getFriends(){return _ref.apply(this,arguments);};}();getFriends();},[]);var fetchFriends=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://jsonplaceholder.typicode.com/users\");case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:data=_context2.sent;return _context2.abrupt(\"return\",data);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchFriends(){return _ref2.apply(this,arguments);};}();var deleteFriendFromList=function deleteFriendFromList(e){var temp=friendsArr.filter(function(friend){return friend.id!=e.currentTarget.name;});console.log(\"I'm at Home.js deleting friend \".concat(e.currentTarget.name,\"!\"));// Update friends at localStorage\nvar temp2=friendsArr.map(function(friend){return friend.id;});temp2=temp2.filter(function(f){return f!=e.currentTarget.name;});localStorage.setItem(\"friends\",temp2);setFriends(temp);console.log(friendsArr);};var addFriendToList=function addFriendToList(f){var newFriend={id:Math.random()*1000+1,name:f,username:f};var tempFriendList=[].concat(_toConsumableArray(friendsArr),[newFriend]);console.log(tempFriendList);setFriends(tempFriendList);};var restoreFriends=function restoreFriends(idArr){var idObjArr=idArr.map(function(id){return{id:id,name:\"\",username:\"\",email:\"\",address:{},phone:\"\",website:\"\",company:{}};});console.log(idObjArr);setFriends(idObjArr);// This line is not working!!\nconsole.log(friendsArr);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Topbar,{currUser:props.currUser,updateCurrUser:props.updateCurrUser}),/*#__PURE__*/_jsxs(\"div\",{className:\"homeContainer\",children:[/*#__PURE__*/_jsx(Sidebar,{currUser:props.currUser,friends:friendsArr,deleteFriendFromList:deleteFriendFromList,addFriendToList:addFriendToList}),/*#__PURE__*/_jsx(Feed,{currUser:props.currUser,friends:friendsArr,restoreFriends:restoreFriends}),/*#__PURE__*/_jsx(Rightbar,{currUser:props.currUser})]})]});};export default Home;","map":{"version":3,"sources":["/Users/mikey/social-app/src/pages/home/Home.js"],"names":["React","Feed","Rightbar","Sidebar","Topbar","useEffect","useState","Home","props","tempArrForInitialState","Array","friendsArr","setFriends","getFriends","fetchFriends","serverFriends","localStorage","getItem","console","log","updatedFriends","split","map","n","parseInt","filter","f","includes","id","setItem","friendsIdList","fetch","res","json","data","deleteFriendFromList","e","temp","friend","currentTarget","name","temp2","addFriendToList","newFriend","Math","random","username","tempFriendList","restoreFriends","idArr","idObjArr","email","address","phone","website","company","currUser","updateCurrUser"],"mappings":"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","sourcesContent":["import React from 'react'\nimport \"./home.css\"\nimport Feed from '../../components/feed/Feed'\nimport Rightbar from '../../components/rightbar/Rightbar'\nimport Sidebar from '../../components/sidebar/Sidebar'\nimport Topbar from '../../components/topbar/Topbar'\nimport { useEffect } from 'react'\nimport { useState } from 'react'\n\nconst Home = (props) => {\n\n    const tempArrForInitialState = new Array(20)\n    const [friendsArr, setFriends] = useState(tempArrForInitialState)\n    // Fetch users from dummy server\n    useEffect(() => {\n        const getFriends = async () => {\n            let serverFriends = await fetchFriends()\n            if(localStorage.getItem(\"friends\")){\n                console.log(localStorage)\n                let updatedFriends = localStorage.getItem(\"friends\").split(',')\n                updatedFriends = updatedFriends.map((n)=>(parseInt(n)))\n                console.log(updatedFriends)\n                serverFriends = serverFriends.filter(f => updatedFriends.includes(f.id))\n            }\n            \n            localStorage.setItem(\"allFriends\", serverFriends)\n            setFriends(serverFriends)\n            let friendsIdList = serverFriends.map((f)=>(f.id))\n            console.log(friendsIdList)\n            localStorage.setItem(\"friends\", friendsIdList)\n            console.log(localStorage)\n        }\n        getFriends()\n    }, [])\n    const fetchFriends = async() => {\n        const res = await fetch(\"https://jsonplaceholder.typicode.com/users\")\n        const data = await res.json()\n        return data\n    }\n\n    const deleteFriendFromList = (e) => {\n        let temp = friendsArr.filter( (friend) => friend.id != e.currentTarget.name)\n        console.log(`I'm at Home.js deleting friend ${e.currentTarget.name}!`)\n        \n        // Update friends at localStorage\n        let temp2 = friendsArr.map((friend)=>(friend.id))\n        temp2 = temp2.filter((f) => f != e.currentTarget.name)\n        localStorage.setItem(\"friends\", temp2)\n        setFriends(temp)\n        console.log(friendsArr)\n    }\n\n    const addFriendToList = (f) => {\n        let newFriend = {id: Math.random()*1000+1, name: f, username: f}\n        let tempFriendList = [...friendsArr, newFriend]\n        console.log(tempFriendList)\n        setFriends(tempFriendList)\n    }\n\n    const restoreFriends = (idArr) => {\n        let idObjArr = idArr.map((id) => ({id: id, name: \"\", username: \"\", email:\"\", address: {}, phone:\"\", website:\"\", company:{}}))\n        console.log(idObjArr)\n        setFriends(idObjArr)    // This line is not working!!\n        console.log(friendsArr)\n    }\n\n    return (\n        <>\n            <Topbar currUser={props.currUser} updateCurrUser={props.updateCurrUser}/>\n            <div className=\"homeContainer\">\n                <Sidebar currUser={props.currUser} friends={friendsArr} deleteFriendFromList={deleteFriendFromList} addFriendToList={addFriendToList}/>\n                <Feed currUser={props.currUser} friends={friendsArr} restoreFriends={restoreFriends}/>\n                <Rightbar currUser={props.currUser}/>\n            </div>\n        </>\n    )\n}\nexport default Home\n"]},"metadata":{},"sourceType":"module"}